<!DOCTYPE html>
<html>
  <head>
    <title>Kamera-Auswahl</title>
  </head>
  <body>
    <h2>Verfügbare Kameras</h2>
    <button onclick="init()">Erst Kamera freigeben, dann Kameras anzeigen</button><br><br>
    <select id="cameraSelect"></select>
    <button onclick="startCamera()">Kamera starten</button><br><br>
    <video id="video" autoplay playsinline width="100%" height="auto"></video>

<script>
  async function startARWithBackCamera() {
    const devices = await navigator.mediaDevices.enumerateDevices();
    const videoDevices = devices.filter(d => d.kind === 'videoinput');

    // Versuch, die Rückkamera zu finden
    let backCamera = videoDevices.find(d => d.label.toLowerCase().includes('back'));

    // Fallback: wenn keine explizite Rückkamera erkannt wird
    if (!backCamera && videoDevices.length > 1) {
      backCamera = videoDevices[1]; // oft die zweite ist "hinten"
    } else if (!backCamera) {
      backCamera = videoDevices[0]; // absolute Fallback
    }

    if (!backCamera) {
      alert("Keine Kamera gefunden");
      return;
    }

    // Kamera starten (du kannst das z. B. in AR.js dynamisch weitergeben)
    const stream = await navigator.mediaDevices.getUserMedia({
      video: { deviceId: backCamera.deviceId }
    });

    const videoEl = document.querySelector('video');
    if (videoEl) {
      videoEl.srcObject = stream;
    }
  }

  window.addEventListener('load', () => {
    startARWithBackCamera();
  });
</script>
  </body>
</html>
